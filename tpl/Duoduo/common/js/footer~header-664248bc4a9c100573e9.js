(window.componentWebpackJsonp=window.componentWebpackJsonp||[]).push([[2],{104:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setEnv=function(e){l=e},t.getEnv=function(){return l};var n=t.isClient="undefined"!=typeof window,l="development";if(n){var o=window.location.origin;/\.com$/.test(o)?l="production":/\.com.cn$/.test(o)?l="staging":/\.net$/.test(o)&&(l="testing")}else l="production";t.env=l},105:function(e,t,a){"use strict";var n=a(82),l={readCookie:function(e){for(var t=encodeURIComponent(e)+"=",a=document.cookie.split(";"),n=0;n<a.length;){for(var l=a[n];" "===l.charAt(0);)l=l.substring(1,l.length);if(0===l.indexOf(t))return decodeURIComponent(l.substring(t.length,l.length));n+=1}return null},createCookie:function(e,t,a){var l=void 0;if(a){var o=new Date;o.setTime(o.getTime()+24*a*60*60*1e3),l="; expires="+o.toGMTString()}else l="";var r=(0,n.getDomain)();document.cookie=r?encodeURIComponent(e)+"="+encodeURIComponent(t)+l+"; path=/; domain="+r:encodeURIComponent(e)+"="+encodeURIComponent(t)+l+"; path=/"},deleteCookie:function(e){var t="; expires="+new Date("1970-01-01 8:00:00").toGMTString(),a=(0,n.getDomain)();a&&(document.cookie=encodeURIComponent(e)+"="+t+"; path=/; domain="+a),document.cookie=encodeURIComponent(e)+"="+t+"; path=/"}};e.exports=l},225:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(a(514)),l=o(a(568));function o(e){return e&&e.__esModule?e:{default:e}}var r=[{path:"/component/tplnew/header",component:n.default,exact:!0},{path:"/component/tplnew/footer",component:l.default,exact:!0}];t.default=r},514:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l=R(a(197)),o=R(a(71)),r=R(a(517)),s=R(a(31)),u=R(a(32)),i=R(a(33)),d=R(a(34)),c=R(a(35)),f=R(a(135)),h=R(a(144)),m=function(){var e=(0,h.default)(f.default.mark(function e(t){var a;return f.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,k.default)({action:"getNavData",body:t});case 3:return a=e.sent,e.abrupt("return",{navList:a.data});case 7:return e.prev=7,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",{navList:[]});case 11:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=(0,h.default)(f.default.mark(function e(t){var a;return f.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,k.default)({action:"pagecities",body:{}});case 3:return a=e.sent,e.abrupt("return",U(a.data,t));case 7:return e.prev=7,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",U([],t));case 11:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}(),v=a(2),g=R(v),y=R(a(1)),w=a(36),b=R(a(72)),k=R(a(81)),C=R(a(540)),E=a(82),_=R(a(105)),I=R(a(545)),N=R(a(547)),x=R(a(550)),S=R(a(553)),P=R(a(561)),M=R(a(567));function R(e){return e&&e.__esModule?e:{default:e}}function U(e,t){var a=t.city_id||121,n={},l={};return e.forEach(function(e){n[e.scope]?n[e.scope].push(e):(n[e.scope]=[],n[e.scope].push(e)),parseInt(e.id,10)===parseInt(a,10)&&(l=e)}),{cityList:n,currCity:l}}"undefined"!=typeof window&&(window.loginAction={init:function(){},login:function(){},getUserInfo:function(){}});var T=(0,w.autobind)(n=function(e){function t(){var e,a,n,l;(0,u.default)(this,t);for(var o=arguments.length,r=Array(o),i=0;i<o;i++)r[i]=arguments[i];return a=n=(0,d.default)(this,(e=t.__proto__||(0,s.default)(t)).call.apply(e,[this].concat(r))),n.state={isRegister:!1,modalShow:!1,overlay:"",username:""},l=a,(0,d.default)(n,l)}return(0,c.default)(t,e),(0,i.default)(t,[{key:"componentDidMount",value:function(){(0,M.default)(),this.getUser(),window.loginState.modal=this.showModal,window.loginState.logout=this.logout,window.loginState.getUser=this.getUser}},{key:"getUser",value:function(e){var t=this,a=_.default.readCookie("secretToken")||"";(0,k.default)({action:"getUser",body:{},headers:{authorization:"Bearer "+a}}).then(function(a){t.setItemAfterGetInfo(a),e&&"function"==typeof e&&e(a)})}},{key:"setItemAfterGetInfo",value:function(e){if(window.loginState.isFetchedUser=!0,e&&(e.userId||e.user_id)){window.loginState.user=e,window.loginState.isLogined=!0;var t=e.username,a=e.name,n=t||a;t||a||(n="用户"+e.mobile.substring(e.mobile.length-4)),this.setUser(n)}else window.loginState.isLogined=!1}},{key:"setUser",value:function(e){this.setState({username:e})}},{key:"logout",value:function(){var e=this,t=window.loginState;t.user={},t.isLogined=!1,t.login={},(0,k.default)({action:"logout",body:{},headers:{webcomponentuuid:_.default.readCookie("webcomponentuuid")}}).then(function(){e.setUser(""),t.init.logoutCallBack&&"function"==typeof t.init.logoutCallBack?t.init.logoutCallBack():window.location.href=window.location.href})}},{key:"showModal",value:function(e){this.setState({modalShow:e&&!0,isRegister:!1})}},{key:"showRegisterModal",value:function(){this.setState({modalShow:!0,isRegister:!0})}},{key:"overlay",value:function(e){var t=this;this.setState({overlay:e}),setTimeout(function(){t.setState({overlay:""})},2e3)}},{key:"render",value:function(){var e=this.state,t=e.modalShow,a=e.username,n=e.isRegister,l=this.props,s=l.navList,u=l.label,i=l.currCity,d=l.cityList,c=l.width,f=l.adShow,h=l.modalzIndex,m=(0,r.default)(d),p={maxWidth:c+"px",margin:"auto",position:"relative"};return g.default.createElement(v.Fragment,null,g.default.createElement("div",{className:I.default.appHeader},g.default.createElement("div",{className:I.default.appendHeaderInner,style:c?p:{}},g.default.createElement("div",{className:I.default.logo},g.default.createElement("a",{href:i.redirectUrl},g.default.createElement("img",{src:"//fs.esf.fangdd.com/efab/FjuHh5aoWtI_CGz7mFRrpAEqtbbj.png",alt:""}))),g.default.createElement("div",{className:I.default.city},g.default.createElement("div",{className:I.default.cityCurrent},g.default.createElement("span",{className:I.default.line}),g.default.createElement("span",null,i.name),g.default.createElement("span",{className:I.default.arrow})),g.default.createElement("div",{className:I.default.cityList},m.map(function(e,t){return g.default.createElement(x.default,{key:e,name:e,isLast:t===m.length-1,data:d[e]})}))),g.default.createElement("ul",{className:I.default.navList},s.map(function(e){return g.default.createElement(N.default,{key:e.name,data:e,label:u})}),g.default.createElement("li",{className:I.default.loginItem},g.default.createElement("span",{className:(0,b.default)(I.default.loginItemInner,(0,o.default)({},""+I.default.show,""===a))},g.default.createElement("a",{className:I.default.loginALink,onKeyPress:this.showModal,onClick:this.showModal,role:"button",tabIndex:"-1"},"登录"),"／",g.default.createElement("a",{className:I.default.loginALink,onKeyPress:this.showRegisterModal,onClick:this.showRegisterModal,role:"button",tabIndex:"-1"},"注册")),g.default.createElement("span",{className:(0,b.default)(I.default.loginItemInner,(0,o.default)({},""+I.default.show,""!==a))},g.default.createElement("a",{href:(0,E.concatUrl)("/usercenter/"+(i?i.pinyin:"shanghai")+"/index"),className:I.default.loginALink,rel:"noopener noreferrer",target:"_blank"},a||"--"),g.default.createElement("span",{className:I.default.loginSeparator},"|"),g.default.createElement("a",{className:I.default.loginALink,onClick:this.logout,onKeyPress:this.logout,role:"button",tabIndex:"-1"},"退出"))))),g.default.createElement(S.default,{show:t,overlay:this.overlay,isRegister:n,showModal:this.showModal,setUser:this.setUser,logout:this.logout,setItemAfterGetInfo:this.setItemAfterGetInfo,zIndex:h})),"false"!==f?g.default.createElement(P.default,{cityId:i.id,zIndex:h}):null,g.default.createElement(C.default,{text:this.state.overlay,zIndex:h}))}}],[{key:"GET_SSR_CACHE_KEY",value:function(e){var t=e.reqHeaders,a=e.parsedUrl,n=(e.params,e.queryParams);return{host:t.host,pathname:a.pathname,label:n.label,city_id:n.city_id,newVision:n.newVision,width:n.width,adShow:n.adShow,modalzIndex:n.modalzIndex}}},{key:"getInitialProps",value:function(){var e=(0,h.default)(f.default.mark(function e(t){t.params;var a,n,o,r,s,u=t.queryParams;t.isClient,t.reqHeaders,t.parsedUrl;return f.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m(u);case 2:return a=e.sent,n=a.navList,e.next=6,p(u);case 6:return o=e.sent,r=o.cityList,s=o.currCity,e.abrupt("return",(0,l.default)({navList:n,cityList:r,currCity:s},u));case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),t}(g.default.PureComponent))||n;T.SSR_QUERY_KEYS=["label","city_id","newVision","width","adShow","modalzIndex"],T.propTypes={cityList:y.default.shape(),navList:y.default.arrayOf(y.default.shape()),currCity:y.default.shape(),label:y.default.string,width:y.default.string,adShow:y.default.string,modalzIndex:y.default.string},T.defaultProps={navList:[],cityList:{},currCity:{},label:"",width:"",adShow:"false",modalzIndex:""},t.default=T},540:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l=p(a(71)),o=p(a(31)),r=p(a(32)),s=p(a(33)),u=p(a(34)),i=p(a(35)),d=p(a(2)),c=p(a(1)),f=a(36),h=p(a(72)),m=p(a(541));function p(e){return e&&e.__esModule?e:{default:e}}var v=(0,f.autobind)(n=function(e){function t(){var e,a,n,l;(0,r.default)(this,t);for(var s=arguments.length,i=Array(s),d=0;d<s;d++)i[d]=arguments[d];return a=n=(0,u.default)(this,(e=t.__proto__||(0,o.default)(t)).call.apply(e,[this].concat(i))),n.state={show:!1},l=a,(0,u.default)(n,l)}return(0,i.default)(t,e),(0,s.default)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this;e.text&&(this.setState({show:!0}),setTimeout(function(){t.setState({show:!1})},2e3))}},{key:"render",value:function(){var e=this.state.show,t=this.props.text,a=this.props.zIndex,n={zIndex:a?a+3:a};return d.default.createElement("div",{className:(0,h.default)(m.default.overlay,(0,l.default)({},""+m.default.show,e)),style:n},t)}}]),t}(d.default.PureComponent))||n;v.defaultProps={text:""},v.propTypes={text:c.default.string},t.default=v},543:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){return e&&e.__esModule?e:{default:e}}(a(544));var l=n.default.name,o=parseInt(n.default.config.port,10),r=l.toLowerCase().replace(/[-.]/g,""),s=o,u="esf/"+r;t.default={port:o,prefix:r,staticPort:s,staticPrefix:u}},544:function(e){e.exports={name:"web.component.esf.fdd",private:!0,version:"1.0.0",description:"Fdd frontend seed project",main:"index.js",config:{port:65155,apm:!0},scripts:{dev:"fdd-dev",build:"fdd-build -f",test:"fdd-lint","start-local":"fdd-start -l",deploy:"npm run build",start:"pm2 start process.json",restart:"pm2 start process.json",docker:"node .fdd/server.js;sleep 600",stop:"pm2 stop process.json"},author:"tangli@fangdd.com",license:"MIT",dependencies:{"@fdd/ioux":"^2.0.2","@fdd/isomorphic-data":"^1.0.1","@fdd/react-server-render":"^1.1.13","@fdd/request":"^2.2.0","body-parser":"^1.18.3",classnames:"^2.2.6","cookie-parser":"^1.4.3","core-decorators":"^0.20.0",express:"^4.16.3","express-jwt":"^5.3.1","immutability-helper":"^2.7.1","isomorphic-fetch":"^2.2.1",jsonwebtoken:"^8.3.0","normalize.css":"^8.0.0","prop-types":"^15.6.2",qs:"^6.5.2",react:"^16.4.2","react-dom":"^16.4.2","react-hot-loader":"next","react-redux":"^5.0.7","react-router-dom":"^4.3.1","serve-favicon":"^2.5.0","svg-captcha":"^1.3.11",uuid:"^3.3.2"},devDependencies:{eslint:"^5.4.0"}}},547:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l=p(a(71)),o=p(a(31)),r=p(a(32)),s=p(a(33)),u=p(a(34)),i=p(a(35)),d=p(a(2)),c=p(a(1)),f=p(a(72)),h=a(36),m=p(a(548));function p(e){return e&&e.__esModule?e:{default:e}}var v=(0,h.autobind)(n=function(e){function t(){return(0,r.default)(this,t),(0,u.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments))}return(0,i.default)(t,e),(0,s.default)(t,[{key:"render",value:function(){var e=this.props.data,t=this.props.label,a=e.subTitle||[];return d.default.createElement("li",{className:(0,f.default)(m.default.navItem,(0,l.default)({},""+m.default.active,t.indexOf(e.label)>-1))},d.default.createElement("a",{href:e.url,target:"_blank",className:m.default.navItemLink},d.default.createElement("div",{className:m.default.navItemName},e.name),a.length>0?d.default.createElement("div",{className:m.default.arrow}):null),a.length>0?d.default.createElement("div",{className:m.default.navSubItems},a.map(function(e){return d.default.createElement("a",{href:e.url,key:e.name,target:"_blank",className:(0,f.default)(m.default.navSubItem,(0,l.default)({},""+m.default.active,t.indexOf(e.label)>-1))},e.name)})):null)}}]),t}(d.default.PureComponent))||n;v.defaultProps={data:{},label:""},v.propTypes={data:c.default.object,label:c.default.string},t.default=v},550:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l=p(a(71)),o=p(a(31)),r=p(a(32)),s=p(a(33)),u=p(a(34)),i=p(a(35)),d=p(a(2)),c=p(a(1)),f=p(a(72)),h=a(36),m=p(a(551));function p(e){return e&&e.__esModule?e:{default:e}}var v=(0,h.autobind)(n=function(e){function t(){return(0,r.default)(this,t),(0,u.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments))}return(0,i.default)(t,e),(0,s.default)(t,[{key:"render",value:function(){var e=this.props,t=e.data,a=e.name,n=e.isLast;return d.default.createElement("li",{className:(0,f.default)(m.default.cityItem,(0,l.default)({},""+m.default.last,n))},d.default.createElement("div",{className:m.default.groupName},a.toUpperCase()),d.default.createElement("ul",{className:m.default.cityXiangs},t.map(function(e){return d.default.createElement("li",{key:e.id,className:m.default.cityXiang+" "+("热门城市"===a?m.default.deepColor:"")},d.default.createElement("a",{href:e.redirectUrl,className:m.default.cityLink},e.name))})))}}]),t}(d.default.PureComponent))||n;v.defaultProps={data:{},name:"",isLast:!1},v.propTypes={data:c.default.arrayOf(c.default.shape()),name:c.default.string,isLast:c.default.bool},t.default=v},553:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l=C(a(71)),o=C(a(31)),r=C(a(32)),s=C(a(33)),u=C(a(34)),i=C(a(35)),d=a(2),c=C(d),f=C(a(554)),h=C(a(1)),m=C(a(72)),p=a(36),v=C(a(81)),g=C(a(555)),y=C(a(557)),w=C(a(560)),b=a(82),k=C(a(105));function C(e){return e&&e.__esModule?e:{default:e}}var E=(0,p.autobind)(n=function(e){function t(){var e,a,n,l;(0,r.default)(this,t);for(var s=arguments.length,i=Array(s),d=0;d<s;d++)i[d]=arguments[d];return a=n=(0,u.default)(this,(e=t.__proto__||(0,o.default)(t)).call.apply(e,[this].concat(i))),n.state={form:{mobile:"",captcha:"",code:""},valid:{mobile:null,captcha:"",code:""},hints:{mobile:"",captcha:"",code:""},agreed:!1,captchaSvg:"",showCaptcha:!1,captchaNeed:!1,mobileRegx:/^1[34578]\d{9}$/},n.errorhints={mobile:["手机号不能为空","手机号错误"],captcha:["图片验证码不能为空"],code:["验证码不能为空","验证码错误"]},l=a,(0,u.default)(n,l)}return(0,i.default)(t,e),(0,s.default)(t,[{key:"getCodeValid",value:function(){return this.state.captchaNeed&&!this.state.showCaptcha?(this.setState({showCaptcha:!0}),!1):!!this.handleValidMobile()&&!(!this.handleValidCaptcha()&&this.state.captchaNeed)}},{key:"getCodeCallback",value:function(){}},{key:"getCaptcha",value:function(){var e=this;this.state.showCaptcha&&fetch((0,b.getFetchUrl)("/component/api/captcha"),{method:"GET",credentials:"include",headers:new Headers({"X-Requested-With":"XMLHttpRequest","Content-Type":"image/svg+xml",Accept:"image/svg+xml"})}).then(function(e){return e.text()}).then(function(t){var a=(0,f.default)(e.state,{captchaSvg:{$set:t}});e.setState(a)})}},{key:"handleChange",value:function(e){var t=this;return function(a){var n=null,o="",r=a.target.value;switch(e){case"captcha":r||(n=!1,o=t.errorhints.captcha[0]);break;case"code":r||(n=!1);break;case"mobile":r&&11===r.length&&t.state.mobileRegx.test(r)&&(n=!0)}var s=(0,f.default)(t.state,{form:(0,l.default)({},e,{$set:r}),valid:(0,l.default)({},e,{$set:n}),hints:(0,l.default)({},e,{$set:o})});t.setState(s)}}},{key:"handerPhoneKeyPress",value:function(e){var t=e||window.event,a=t.keycode||t.which;a>=48&&a<=57||t.preventDefault()}},{key:"handerCodeKeyPress",value:function(e){var t=this.state.form.code,a=e||window.event,n=a.keycode||a.which;t.length>=6&&a.preventDefault(),n>=48&&n<=57||a.preventDefault()}},{key:"handerCaptchaKeyPress",value:function(e){var t=e||window.event,a=t.keycode||t.which;a>=48&&a<=57||a>=65&&a<=122||t.preventDefault()}},{key:"handlerPhoneBlur",value:function(){this.handleValidMobile()}},{key:"handlerCaptchaBlur",value:function(){this.handleValidCaptcha()}},{key:"handlerCodeBlur",value:function(){this.handleValidCode()}},{key:"handleValidMobile",value:function(){var e=this.state,t="",a=!0;e.form.mobile?e.mobileRegx.test(e.form.mobile)||(t=this.errorhints.mobile[1],a=!1):(t=this.errorhints.mobile[0],a=!1);var n=(0,f.default)(this.state,{hints:{mobile:{$set:t}},valid:{mobile:{$set:a}}});return this.setState(n),a}},{key:"handleValidCode",value:function(){var e="",t=!0;this.state.form.code||(e=this.errorhints.code[0],t=!1);var a=(0,f.default)(this.state,{hints:{code:{$set:e}},valid:{code:{$set:t}}});return this.setState(a),t}},{key:"handleValidCaptcha",value:function(){var e="",t=!0;this.state.form.captcha||(e=this.errorhints.captcha[0],t=!1);var a=(0,f.default)(this.state,{hints:{captcha:{$set:e}},valid:{captcha:{$set:t}}});return this.setState(a),t}},{key:"handlerLogin",value:function(){var e=this,t=this.props,a=t.overlay,n=t.isRegister,l=this.state.agreed;!n||l?this.handleValidMobile()&&this.handleValidCode()&&(0,v.default)({action:"login",body:{code:this.state.form.code,mobile:this.state.form.mobile,captcha:this.state.form.captcha},headers:{webcomponentuuid:k.default.readCookie("webcomponentuuid")}}).then(function(t){var a=window.loginState;"00000"===t.code?(e.props.showModal(!1),e.clearState(),e.getCaptcha(),e.props.overlay("登录成功"),a.user=t.data,a.isLogined=!0,a.isThirdParty&&a.login.successCallback&&"function"==typeof a.login.successCallback&&a.login.successCallback(t),!a.isThirdParty&&a.init.successCallback&&"function"==typeof a.init.successCallback&&a.init.successCallback(t)):("20008"===t.code?e.props.overlay("您的账号目前处于不可用状态，您有任何疑问请拨打房多多客服：400-008-9900"):e.props.overlay(t.msg),a.login.failCallBack&&"function"==typeof a.login.failCallBack&&a.login.failCallBack(t)),e.props.setItemAfterGetInfo(t.data)}):a("请确认已阅读用户注册协议和隐私条款")}},{key:"closeModal",value:function(){var e=window.loginState;this.props.showModal(!1),e.login.closeCallBack&&"function"==typeof e.login.closeCallBack&&e.login.closeCallBack()}},{key:"toggleAgree",value:function(){var e=this.state.agreed;this.setState({agreed:!e})}},{key:"clearState",value:function(){var e=(0,f.default)(this.state,{form:{mobile:{$set:""},captcha:{$set:""},code:{$set:""}},valid:{mobile:{$set:null},captcha:{$set:null},code:{$set:null}},showCaptcha:{$set:!0}});this.setState(e)}},{key:"render",value:function(){var e=this.props,t=e.zIndex,a=e.isRegister,n=e.show,o=this.state,r=o.agreed,s=o.valid,u=o.form,i=o.hints,f=o.showCaptcha,h=o.captchaNeed,p={zIndex:t?t+1:t};return c.default.createElement(d.Fragment,null,n?c.default.createElement("div",{className:(0,m.default)(g.default.modal,(0,l.default)({},""+g.default.show,n)),style:p},c.default.createElement("div",{className:g.default.modalContent},c.default.createElement("div",{className:g.default.modalContentTitle},"手机号快捷登录"),c.default.createElement("div",{className:g.default.modalClose,onClick:this.closeModal}),c.default.createElement("div",{className:g.default.modalInnerContent},c.default.createElement("div",{className:g.default.formWrapper},c.default.createElement("div",{className:g.default.formitemWrapper},c.default.createElement("div",{className:(0,m.default)(g.default.formItem,(0,l.default)({},""+g.default.error,!1===s.mobile))},c.default.createElement("i",{className:g.default.phoneIcon}),c.default.createElement("input",{type:"tel",name:"mobile",maxLength:"11",value:u.mobile,className:g.default.formItemInput+" "+g.default.inputNoBorder,placeholder:"请输入您的手机号",onChange:this.handleChange("mobile"),onKeyPress:this.handerPhoneKeyPress,onBlur:this.handlerPhoneBlur,autoComplete:"off"}),c.default.createElement("i",{className:(0,m.default)(g.default.phoneRight,(0,l.default)({},""+g.default.show,s.mobile))})),c.default.createElement("div",{className:(0,m.default)(g.default.errorHint,(0,l.default)({},""+g.default.show,!1===s.mobile))},c.default.createElement("span",null,i.mobile))),c.default.createElement("div",{className:(0,m.default)(g.default.formitemWrapper,(0,l.default)({},""+g.default.hide,!f||!h))},c.default.createElement("div",{className:(0,m.default)(g.default.formItem,(0,l.default)({},""+g.default.error,!1===s.captcha))},c.default.createElement("i",{className:g.default.captchaIcon}),c.default.createElement("input",{type:"text",name:"captcha",value:u.captcha,className:(0,m.default)([g.default.formItemInput+" "+g.default.formItemCode+" "]),placeholder:"请输入右侧验证码",onChange:this.handleChange("captcha"),onKeyPress:this.handerCaptchaKeyPress,autoComplete:"off"}),c.default.createElement("div",{className:g.default.cutDownWrapper},c.default.createElement(w.default,{getCaptcha:this.getCaptcha,captchaSvg:this.state.captchaSvg,overlay:this.props.overlay}))),c.default.createElement("div",{className:(0,m.default)(g.default.errorHint,(0,l.default)({},""+g.default.show,!1===s.captcha))},c.default.createElement("span",null,i.captcha)),c.default.createElement("button",{className:g.default.changeImg,onClick:this.getCaptcha},c.default.createElement("span",{className:g.default.changeImgText},"换一张"),c.default.createElement("i",{className:g.default.changeImgIcon}))),c.default.createElement("div",{className:g.default.formitemWrapper},c.default.createElement("div",{className:(0,m.default)(g.default.formItem,(0,l.default)({},""+g.default.error,!1===s.code))},c.default.createElement("i",{className:g.default.codeIcon}),c.default.createElement("input",{type:"tel",name:"code",value:u.code,className:(0,m.default)([g.default.formItemInput+" "+g.default.formItemCode+" "]),placeholder:"请输入短信验证码",onChange:this.handleChange("code"),onKeyPress:this.handerCodeKeyPress,onBlur:this.handlerCodeBlur,autoComplete:"off"}),c.default.createElement("div",{className:g.default.cutDownWrapper},c.default.createElement(y.default,{mobile:u.mobile,captcha:u.captcha,overlay:this.props.overlay,getCaptcha:this.getCaptcha,getCodeValid:this.getCodeValid,getCodeCallback:this.getCodeCallback,captchaNeed:h}))),c.default.createElement("div",{className:(0,m.default)(g.default.errorHint,(0,l.default)({},""+g.default.show,!1===s.code))},c.default.createElement("span",null,i.code))),a?c.default.createElement("div",{className:g.default.agree},c.default.createElement("button",{type:"button",className:(0,m.default)(g.default.agreeCheckbox,(0,l.default)({},g.default.agreeCheckboxChecked,r)),onClick:this.toggleAgree}),"我已阅读并同意",c.default.createElement("a",{href:"https://www.fangdd.com/foot/index/service",className:g.default.agreeLink,target:"_blank",rel:"noopener noreferrer"},"《用户注册协议和隐私条款》")):null,c.default.createElement("button",{className:g.default.loginConfirm,onClick:this.handlerLogin,type:"button"},"立即登录"))))):null)}}]),t}(c.default.PureComponent))||n;E.propTypes={show:h.default.bool,isRegister:h.default.bool,overlay:h.default.func.isRequired,showModal:h.default.func.isRequired},E.defaultProps={show:!1,isRegister:!1},t.default=E},557:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l=p(a(31)),o=p(a(32)),r=p(a(33)),s=p(a(34)),u=p(a(35)),i=p(a(2)),d=p(a(1)),c=a(36),f=p(a(81)),h=p(a(105)),m=p(a(558));function p(e){return e&&e.__esModule?e:{default:e}}var v=(0,c.autobind)(n=function(e){function t(){var e,a,n,r;(0,o.default)(this,t);for(var u=arguments.length,i=Array(u),d=0;d<u;d++)i[d]=arguments[d];return a=n=(0,s.default)(this,(e=t.__proto__||(0,l.default)(t)).call.apply(e,[this].concat(i))),n.state={cutDownTime:60,intervalText:"获取验证码",intervalTime:60},n.inteveralInstance=null,r=a,(0,s.default)(n,r)}return(0,u.default)(t,e),(0,r.default)(t,[{key:"componentWillUnmount",value:function(){clearInterval(this.inteveralInstance)}},{key:"valid",value:function(){var e=this.props,t=e.mobile,a=e.captcha,n=e.overlay,l=e.captchaNeed;return!!this.props.getCodeValid()&&(t?/^1[34578]\d{9}$/.test(t)?!(!a&&l)||(n("图形验证码没填"),!1):(n("手机号码错误"),!1):(n("手机号码没有填写"),!1))}},{key:"handlerGetCode",value:function(){var e=this;this.inteveralInstance||this.valid()&&(0,f.default)({action:"getCode",body:{code:"111111",mobile:this.props.mobile,captcha:this.props.captcha},headers:{webcomponentuuid:h.default.readCookie("webcomponentuuid")}}).then(function(t){"00000"===t.code?(e.cutDown(),e.props.getCaptcha(),e.props.overlay("发送成功"),e.props.getCodeCallback()):(e.props.getCaptcha(),e.props.overlay(t.msg))})}},{key:"cutDown",value:function(){var e=this;this.inteveralInstance=setInterval(function(){e.intervalTime-=1;var t=e.state.cutDownTime-1;e.setState({cutDownTime:t}),t<=0&&(clearInterval(e.inteveralInstance),e.inteveralInstance=null,e.setState({cutDownTime:e.state.intervalTime}))},1e3)}},{key:"render",value:function(){return i.default.createElement("button",{className:m.default.cutDown+" "+(this.state.intervalTime===this.state.cutDownTime?"":m.default.colorChange),onClick:this.handlerGetCode},this.state.intervalTime===this.state.cutDownTime?this.state.intervalText:this.state.cutDownTime+"s后重新获取")}}]),t}(i.default.PureComponent))||n;v.propTypes={mobile:d.default.string,captcha:d.default.string,captchaNeed:d.default.bool,overlay:d.default.func.isRequired,getCaptcha:d.default.func.isRequired,getCodeValid:d.default.func.isRequired,getCodeCallback:d.default.func.isRequired},v.defaultProps={mobile:"",captcha:"",captchaNeed:!1},t.default=v},560:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l=c(a(31)),o=c(a(32)),r=c(a(33)),s=c(a(34)),u=c(a(35)),i=c(a(2)),d=c(a(1));function c(e){return e&&e.__esModule?e:{default:e}}var f=(0,a(36).autobind)(n=function(e){function t(){return(0,o.default)(this,t),(0,s.default)(this,(t.__proto__||(0,l.default)(t)).apply(this,arguments))}return(0,u.default)(t,e),(0,r.default)(t,[{key:"componentDidMount",value:function(){}},{key:"change",value:function(){this.props.getCaptcha()}},{key:"render",value:function(){var e=this.props.captchaSvg;return i.default.createElement("div",{dangerouslySetInnerHTML:{__html:e},onClick:this.change})}}]),t}(i.default.PureComponent))||n;f.propTypes={captchaSvg:d.default.string.isRequired,getCaptcha:d.default.func.isRequired},f.defaultProps={data:{}},t.default=f},561:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l=y(a(198)),o=y(a(31)),r=y(a(32)),s=y(a(33)),u=y(a(34)),i=y(a(35)),d=a(2),c=y(d),f=y(a(1)),h=a(36),m=y(a(81)),p=y(a(562)),v=y(a(105)),g=y(a(564));function y(e){return e&&e.__esModule?e:{default:e}}var w=(0,h.autobind)(n=function(e){function t(){var e,a,n,l;(0,r.default)(this,t);for(var s=arguments.length,i=Array(s),d=0;d<s;d++)i[d]=arguments[d];return a=n=(0,u.default)(this,(e=t.__proto__||(0,o.default)(t)).call.apply(e,[this].concat(i))),n.state={bannerShow:!1,showResult:!1,status:"00000"},l=a,(0,u.default)(n,l)}return(0,i.default)(t,e),(0,s.default)(t,[{key:"componentDidMount",value:function(){setTimeout(this.initBanner,100)}},{key:"getCardAction",value:function(e){var t=this;(0,m.default)({action:"getFanxianCard",body:e}).then(function(e){var a=(0,l.default)({},t.state);a.showResult=!0,"80008"===e.code&&(a.status=e.code),t.setState(a)})}},{key:"getCard",value:function(){var e=this,t=this.props.cityId;window.loginAction.getUserInfo(function(a){if(a){var n={userId:a.userId,token:a.token,cityId:t,type:2,deviceType:"web",houseId:"0"};e.getCardAction(n)}else window.loginAction.login({successCallback:function(){e.getCard()}})})}},{key:"initBanner",value:function(){var e=v.default.readCookie("adOpen");this.setState({bannerShow:"false"!==e})}},{key:"open",value:function(){v.default.createCookie("adOpen",!0,1),this.setState({bannerShow:!0})}},{key:"close",value:function(){v.default.createCookie("adOpen",!1,1),this.setState({bannerShow:!1})}},{key:"closeResult",value:function(){this.setState({showResult:!1})}},{key:"render",value:function(){var e=this.state,t=e.bannerShow,a=e.showResult,n=e.status,l={zIndex:this.props.zIndex,left:t?"0px":"100%"};return c.default.createElement(d.Fragment,null,c.default.createElement("section",{className:p.default.banner,style:l},c.default.createElement("div",{className:p.default.bannerInner},c.default.createElement("button",{className:p.default.close,onClick:this.close}),c.default.createElement("div",{className:p.default.bannerText}),c.default.createElement("button",{className:p.default.btn,type:"button",onClick:this.getCard},"领取独家优惠"),c.default.createElement("div",{className:p.default.code}))),c.default.createElement("section",{className:p.default.side,style:{right:t?"-214px":"0px"}},c.default.createElement("button",{className:p.default.arrow,onClick:this.open},c.default.createElement("img",{alt:"",src:"https://fs.esf.fangdd.com/efab/FsDDUJ6UCElHeQqHzUoM8LP0ndxT.png?imageView2/0/w/1024",className:p.default.arrowimg})),c.default.createElement("div",{className:p.default.text},"房多多手机版"),c.default.createElement("div",{className:p.default.text},"实时特价推送"),c.default.createElement("img",{alt:"",src:"https://fs.esf.fangdd.com/efab/Fh2psJhtOA0Mxl760JerGtPxfRwn.png?imageView2/0/w/1024",className:p.default.sideCode})),a?c.default.createElement(g.default,{show:a,status:n,closeResult:this.closeResult}):null)}}]),t}(c.default.PureComponent))||n;w.defaultProps={cityId:121,zIndex:""},w.propTypes={cityId:f.default.number,zIndex:f.default.string},t.default=w},564:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l=f(a(31)),o=f(a(32)),r=f(a(33)),s=f(a(34)),u=f(a(35)),i=f(a(2)),d=(f(a(1)),a(36)),c=f(a(565));function f(e){return e&&e.__esModule?e:{default:e}}var h=(0,d.autobind)(n=function(e){function t(){return(0,o.default)(this,t),(0,s.default)(this,(t.__proto__||(0,l.default)(t)).apply(this,arguments))}return(0,u.default)(t,e),(0,r.default)(t,[{key:"handleCloseModal",value:function(){}},{key:"render",value:function(){var e=this.props,t=(e.show,e.status);return i.default.createElement("section",{className:""+c.default.root},i.default.createElement("div",{className:c.default.fanxianResult},i.default.createElement("div",{className:c.default.fanxianResultClose,role:"button",tabIndex:"-1",onClick:this.props.closeResult}),i.default.createElement("div",{className:c.default.moneyResult},"4999"),i.default.createElement("div",{className:c.default.fanxianHead},"00000"!==t?i.default.createElement("p",{className:c.default.fanxianResultTitle3},"您已领过该返现卡"):i.default.createElement("div",null,i.default.createElement("p",{className:c.default.fanxianResultTitle},"购房返现卡"),i.default.createElement("p",{className:c.default.fanxianResultTitle2},"领取成功"))),i.default.createElement("div",{className:c.default.fanxianApp})))}}]),t}(i.default.Component))||n;h.defaultProps={show:!1},h.propTypes={},t.default=h},567:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e={},t={init:{},login:{},isFetchedUser:!1};if(!n.isClient)return{init:{},login:{},isFetchedUser:!1};if(!window.loginState)return window.loginState=t,window.loginAction={},window.loginCallback=[],(e=window.loginAction).init=function(e){t.init={successCallback:e.successCallback,failCallBack:e.failCallBack,logoutCallBack:e.logoutCallBack}},e.login=function(e){t.login={successCallback:e.successCallback,failCallBack:e.failCallBack,closeCallBack:e.closeCallBack},t.modal(!0),t.isThirdParty=!0},e.isLogined=function(){return t.isLogined},e.getUserInfo=function(e,a){t.isFetchedUser?e&&"function"==typeof e&&e(t.user):t.user?t.getUser(function(a){var n={};a.userId&&(t.isFetchedUser=!0,n=a.data),e&&"function"==typeof e&&e(n)}):window.loginCallback.push(e)},e.logout=function(){t.logout()},t;return window.loginState};var n=a(104)},568:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l=g(a(135)),o=g(a(144)),r=g(a(31)),s=g(a(32)),u=g(a(33)),i=g(a(34)),d=g(a(35)),c=g(a(2)),f=g(a(1)),h=a(36),m=g(a(569)),p=a(82),v=g(a(571));function g(e){return e&&e.__esModule?e:{default:e}}var y=[{title:"了解房多多",link:(0,p.concatUrl)("/foot/index/about")},{title:"加入房多多",link:"//job.fangdd.com/index.html#!/social_job/all",hot:!0},{title:"加盟商通道",link:(0,p.concatUrl)("/event/roombusiness/web",!0),hot:!0},{title:"联系我们",link:(0,p.concatUrl)("/foot/index/contact")},{title:"我是买房者",link:(0,p.concatUrl)("/foot/index/buy"),hide:!0},{title:"我是业主",link:"",hide:!0},{title:"我是经纪人",click:function(){}},{title:"服务声明",link:(0,p.concatUrl)("/foot/index/service")},{title:"网站地图",link:(0,p.concatUrl)("/foot/index/sitemap"),follow:!0},{title:"邮箱: service-fdd@fangdd.com"},{title:"服务热线: 400-008-9900"}],w=(0,h.autobind)(n=function(e){function t(){var e,a,n,l;(0,s.default)(this,t);for(var o=arguments.length,u=Array(o),d=0;d<o;d++)u[d]=arguments[d];return a=n=(0,i.default)(this,(e=t.__proto__||(0,r.default)(t)).call.apply(e,[this].concat(u))),n.state={modalShow:!1},l=a,(0,i.default)(n,l)}return(0,d.default)(t,e),(0,u.default)(t,[{key:"setAgentShow",value:function(e){this.setState({modalShow:e})}},{key:"render",value:function(){var e=this,t=this.state.modalShow,a=this.props,n=a.city_id,l=a.modalzIndex;return y[5].link=(0,p.concatUrl)("/maifang/"+(0,p.getCityPinyin)(n),!0),y[6].click=function(){e.setState({modalShow:!0})},c.default.createElement("div",{className:m.default.root},c.default.createElement("ul",{className:m.default.subList},y.map(function(e){var t=null;if(e.hide)return null;if(e.link){var a="noopener noreferrer";e.follow||(a+="nofollow"),t=c.default.createElement("a",{href:e.link,target:"_blank",rel:a,className:m.default.aLink},e.title)}else t=e.click?c.default.createElement("a",{href:"javascript:;",onClick:e.click,className:m.default.aLink},e.title):c.default.createElement("span",null,e.title);return c.default.createElement("li",{className:m.default.subItem+(e.hot?" "+m.default.hot:""),key:e.title},t)})),c.default.createElement("div",{className:m.default.copyright},c.default.createElement("span",{className:m.default.crItem},"copyright © 2012-2017 www.fangdd.com All Rights Reserved"),c.default.createElement("a",{className:m.default.crItem,target:"_blank",rel:"noopener noreferrer",href:"http://www.miitbeian.gov.cn/"},"粤ICP备12079924号"),c.default.createElement("a",{className:m.default.crItem,target:"_blank",rel:"noopener noreferrer",href:"http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=44030502000415"},c.default.createElement("img",{className:m.default.ghsIcon,src:"//static.fangdd.com/esf/web/ghs-1_DExr5.png",alt:""}),c.default.createElement("span",null,"粤公网安备 44030502000415号")),c.default.createElement("a",{className:m.default.crItem,target:"_blank",rel:"noopener noreferrer",href:"//szcert.ebs.org.cn/5adcbb1c-ef83-45f3-93f6-3dd02261bc8f"},c.default.createElement("img",{className:m.default.govIcon,src:"//fs.esf.fangdd.com/efab/Fvo1Tz1ZcS0MNBtuJBgE-dYZksmL.gif",alt:""})),c.default.createElement("span",null,"ICP号:粤B2-20130460 SP号:B2-20140404")),c.default.createElement(v.default,{show:t,setAgentShow:this.setAgentShow,zIndex:l}))}}],[{key:"GET_SSR_CACHE_KEY",value:function(e){var t=e.reqHeaders,a=e.parsedUrl,n=(e.params,e.queryParams);return{host:t.host,pathname:a.pathname,city_id:n.city_id,modalzIndex:n.modalzIndex}}},{key:"getInitialProps",value:function(){var e=(0,o.default)(l.default.mark(function e(t){t.params,t.queryParams,t.isClient,t.reqHeaders,t.parsedUrl;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{});case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),t}(c.default.PureComponent))||n;w.SSR_QUERY_KEYS=["city_id","modalzIndex"],w.propTypes={city_id:f.default.string},w.defaultProps={city_id:"121"},t.default=w},571:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l=v(a(71)),o=v(a(31)),r=v(a(32)),s=v(a(33)),u=v(a(34)),i=v(a(35)),d=v(a(2)),c=v(a(1)),f=v(a(72)),h=a(36),m=v(a(572)),p=v(a(574));function v(e){return e&&e.__esModule?e:{default:e}}var g=(0,h.autobind)(n=function(e){function t(){return(0,r.default)(this,t),(0,u.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments))}return(0,i.default)(t,e),(0,s.default)(t,[{key:"hide",value:function(){this.props.setAgentShow(!1)}},{key:"render",value:function(){var e=this.props,t=e.show,a={zIndex:e.zIndex};return d.default.createElement("div",{className:(0,f.default)(m.default.modal,(0,l.default)({},""+m.default.show,t)),onClick:this.hide,onKeyPress:this.hide,style:a,role:"button",tabIndex:"-1"},d.default.createElement("img",{src:p.default,alt:"",className:m.default.img}))}}]),t}(d.default.PureComponent))||n;g.defaultProps={show:!1,zIndex:"",setAgentShow:function(){}},g.propTypes={show:c.default.bool,zIndex:c.default.string,setAgentShow:c.default.func},t.default=g},574:function(e,t,a){e.exports=a.p+"download-agent-app-3b3Ko.png"},82:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.concatUrl=t.getCityPinyin=t.getCookieDomain=t.getDomain=t.getFetchUrl=void 0;var n=a(104);var l=function(e){return e&&e.__esModule?e:{default:e}}(a(543)).default.port;var o={development:"",testing:"fangdd.net",staging:"fangdd.com.cn",production:"fangdd.com"};function r(){var e=(0,n.getEnv)();return o[e]}t.getFetchUrl=function(e){var t="",a=(0,n.getEnv)();if(n.isClient){switch(a){case"development":t=""+e;break;case"testing":t="//www.fangdd.net"+e;break;case"staging":t="//www.fangdd.com.cn"+e;break;case"production":t="//www.fangdd.com"+e;break;default:t=e}return t}return"http://localhost:"+l+e},t.getDomain=r,t.getCookieDomain=function(e){return/fangdd\.(com|com\.cn|net)\//.test(e.headers.referer)?r():""},t.getCityPinyin=function(e){return{121:"shanghai",1337:"shenzhen",3:"suzhou",10204:"baishan",852:"guangzhou",2316:"hangzhou",267:"nanjing"}[e]||"shanghai"},t.concatUrl=function(e,t){var a="";switch((0,n.getEnv)()){case"development":a=""+e;break;case"testing":a="//www.fangdd.net"+e,t&&(a="//esf.fangdd.net"+e);break;case"staging":a="//www.fangdd.com.cn"+e,t&&(a="//esf.fangdd.com.cn"+e);break;case"production":a="//www.fangdd.com"+e,t&&(a="//esf.fangdd.com"+e);break;default:a=e}return a}}}]);