(function(){function GetLength(str){var realLength=0,len=str.length,charCode=-1;for(var i=0;i<len;i++){charCode=str.charCodeAt(i);if(charCode>=0&&charCode<=128){realLength+=1}else{realLength+=2}}return realLength}function getCookie(name){var arr=document.cookie.match(new RegExp("(^| )"+name+"=([^;]*)(;|$)"));if(arr!=null){return unescape(arr[2])}return null}function SetCookie(name,value){var Days=1;var exp=new Date();exp.setTime(exp.getTime()+Days*24*60*60*1000);document.cookie=name+"="+escape(value)+";expires="+exp.toGMTString()}jQuery(".jbaoBox").find("li").on("click",function(){if(!jQuery(this).find("i").hasClass("active")){jQuery(this).find("i").addClass("active")}jQuery(this).siblings().find("i").removeClass("active")});function CheckReportParam(){if(GetLength(jQuery(".jbaoBox").find("textarea").val())>200){alert("举报理由不能超过100个汉字");return false}var mobileReg=/^((0?1[358]\d{9})|((0(10|2[1-3]|[3-9]\d{2}))?[1-9]\d{6,7}))$/;if(jQuery("#txt_ReportMobile").val()!=""){if(!mobileReg.test(jQuery("#txt_ReportMobile").val())){alert("格式不正确!");return false}}return true}function Report(){if(CheckReportParam()){jQuery.ajax({url:"/RentDetails/Ajax/ReportHouse.aspx",type:"post",dataType:"json",data:{houseid:houseInfo.houseid,agentid:houseInfo.agentIds,projcode:houseInfo.projcode,btype:"cz",htype:"AGTHOUSE",purpose:escape(houseInfo.purpose),mobile:jQuery("#txt_ReportMobile").val(),checkboxvalue:escape(jQuery(".jbaoBox").find("i.active").next().html()),comment:escape(jQuery("#txt_ReportComent").val())},success:function(data){alert(data.Result+","+data.Message);jQuery(".jbaoBox").hide()}})}}jQuery("#div_Report").on("click",function(){if(login.IsLogin()){Report()}else{location.href="https://passport.fang.com/?backurl="+escape(location.href)}})}());